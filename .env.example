# FluidMCP Environment Variables
# Copy this file to .env and update with your actual values
# Most variables are OPTIONAL with sensible defaults

# ============================================================================
# üöÄ QUICK START - Development Mode (No Setup Required!)
# ============================================================================
#
# Option 1: Single-Port Deployment (Production-like)
# Build the frontend and run everything on one port:
#   cd fluidmcp/frontend && npm run build && cd ../..
#   fmcp serve --allow-insecure --in-memory
#   Frontend: http://localhost:8099/ui
#   Backend API: http://localhost:8099/docs
#
# Option 2: Separate Dev Servers (Hot Reload)
# Run backend and frontend separately for development:
#   Terminal 1: fmcp serve --allow-insecure --allow-all-origins --in-memory
#   Terminal 2: cd fluidmcp/frontend && npm run dev
#   Frontend: http://localhost:5173 (with hot reload)
#   Backend API: http://localhost:8099/docs
#
# ‚ö†Ô∏è  WARNING: --allow-insecure and --allow-all-origins are for development only!
#              Never use these flags in production environments.
#
# For production, use secure mode with MongoDB:
#   fmcp serve --secure --mongodb-uri="mongodb://localhost:27017"
#   Frontend will be served at /ui on the same port as the backend
#
# ============================================================================
# COMMONLY USED (Optional but Recommended)
# ============================================================================

# GitHub Personal Access Token (REQUIRED for private repositories only)
# Uncomment and set if you need to clone private GitHub repos
# FMCP_GITHUB_TOKEN=ghp_yourTokenHere
# GITHUB_TOKEN=ghp_yourTokenHere

# MongoDB URI (REQUIRED only if using 'fluidmcp serve' with MongoDB persistence)
# Default: mongodb://localhost:27017
# MONGODB_URI=mongodb://localhost:27017
# MONGODB_URI=mongodb+srv://user:password@cluster.mongodb.net/?appName=FluidMCP

# CORS Origins (OPTIONAL - defaults to localhost)
# In production: Not needed if using single-port deployment (frontend at /ui)
# In development: Add Vite dev server if running frontend separately
# FMCP_ALLOWED_ORIGINS=http://localhost:5173,http://localhost:3000
# FMCP_ALLOWED_ORIGINS=*  # Development only - allows all origins

# ============================================================================
# SERVER PORTS (Optional - only override if you have conflicts)
# ============================================================================

# Backend API server port (default: 8099)
# This is also where the frontend UI is served in production (at /ui path)
# MCP_CLIENT_SERVER_ALL_PORT=8099

# Individual package server port (default: 8090)
# MCP_CLIENT_SERVER_PORT=8090

# FastAPI proxy port (default: 8080)
# MCP_FASTAPI_PORT=8080

# Frontend dev server port (default: 5173, only when running `npm run dev`)
# This is automatically managed by Vite - no environment variable needed

# Troubleshooting for GitHub Codespaces:
# If you get "Invalid HTTP request received" or 502 errors:
# MCP_CLIENT_SERVER_ALL_PORT=8100
# See docs/TROUBLESHOOTING.md section 9 for details

# ============================================================================
# ADVANCED / OPTIONAL FEATURES
# ============================================================================

# S3 Configuration (REQUIRED only for --master mode)
# Uncomment all 4 variables to enable S3 features
# S3_BUCKET_NAME=your-bucket-name
# S3_ACCESS_KEY=your-access-key
# S3_SECRET_KEY=your-secret-key
# S3_REGION=us-east-1

# MCP Package Registry (OPTIONAL)
# Only needed if using a custom registry
# MCP_FETCH_URL=https://registry.fluidmcp.com/fetch-mcp-package
# MCP_TOKEN=your-registry-token

# Package Installation Directory (OPTIONAL)
# Default: .fmcp-packages in current directory
# MCP_INSTALLATION_DIR=/custom/path/.fmcp-packages

# Security & Authentication (OPTIONAL)
# Auto-generated if using --secure flag
# FMCP_BEARER_TOKEN=your-secure-token-here
# FMCP_SECURE_MODE=true

# ============================================================================
# OAuth0 (Auth0) Authentication (OPTIONAL)
# ============================================================================
# Enable with: fluidmcp run --auth0 or fmcp serve --auth0
# Requires Auth0 tenant with configured application
#
# Setup Instructions:
#   1. Create Auth0 account at https://auth0.com
#   2. Create a "Regular Web Application"
#   3. Configure these settings:
#      - Application URIs: Add callback URL (auto-detected or set FMCP_BASE_URL)
#      - For Codespaces: Use wildcard https://*.app.github.dev/auth/callback
#      - For Gitpod: Use wildcard https://*.gitpod.io/auth/callback
#   4. Copy credentials from Auth0 dashboard to these variables:
#
# FMCP_AUTH0_DOMAIN=dev-abc123.us.auth0.com
# FMCP_AUTH0_CLIENT_ID=your-client-id-here
# FMCP_AUTH0_CLIENT_SECRET=your-client-secret-here
# FMCP_AUTH0_AUDIENCE=https://api.fluidmcp.local
#
# Custom Base URL (OPTIONAL - auto-detected for Codespaces/Gitpod)
# Override the auto-detected base URL for OAuth callbacks
# FMCP_BASE_URL=https://your-custom-domain.com:8099
#
# JWT Secret (OPTIONAL - auto-generated if not provided)
# Used for signing custom JWT tokens after OAuth authentication
# FMCP_JWT_SECRET=your-jwt-signing-secret
#
# Token Storage: Uses httpOnly cookies for security
# - Browser OAuth flow: Token stored in httpOnly cookie (XSS-safe)
# - API clients: Use Authorization: Bearer <token> header
# - Local development: Cookies work over HTTP (secure=False)
# - Production: HTTPS required for secure cookies (secure=True)
#
# ‚ö†Ô∏è  SECURITY NOTES:
#   - Never commit .env file to version control
#   - Keep Auth0 credentials secure
#   - Rotate secrets regularly
#   - Use environment-specific configurations
#   - Bearer token (--secure) and OAuth (--auth0) are mutually exclusive
#
# For detailed setup guide, see: docs/OAUTH_SETUP.md
# ============================================================================

# MongoDB Timeouts (OPTIONAL - only tune if having connection issues)
# FMCP_MONGODB_SERVER_TIMEOUT=30000
# FMCP_MONGODB_CONNECT_TIMEOUT=10000
# FMCP_MONGODB_SOCKET_TIMEOUT=45000
# FMCP_MONGODB_ALLOW_INVALID_CERTS=false

# LLM Streaming Timeout (OPTIONAL)
# Default: 0 (no timeout)
# LLM_STREAMING_TIMEOUT=300

# Port Release Timeout (OPTIONAL)
# Default: 5 seconds
# MCP_PORT_RELEASE_TIMEOUT=5

# Memory Mode Settings (OPTIONAL - only for in-memory persistence)
# FMCP_MAX_MEMORY_LOGS=10000

# Allowed Shell Commands (OPTIONAL - for command execution features)
# FMCP_ALLOWED_COMMANDS=ls,cat,echo